(this["webpackJsonppoem-world"]=this["webpackJsonppoem-world"]||[]).push([[0],{46:function(e,t,o){},47:function(e,t,o){},77:function(e,t,o){"use strict";o.r(t);var s=o(1),n=o.n(s),a=o(17),c=o.n(a),r=(o(46),o(5),o(10)),l=(o(47),o(13)),i=o(6),d=o(14),u=o.n(d),b="/api/poems";u.a.defaults.headers.common.bob="Bobalooba";var j=function(){return u.a.get(b).then((function(e){return e.data}))},m=function(e){return u.a.post(b,e).then((function(e){return e.data}))},h=function(e){var t=e.votes+1;return u.a.post(b+"/"+e.id,{id:e.id,title:e.title,author:e.author,authorid:e.authorid,text:e.text,votes:t}).then((function(e){return e.data}))},O=function(e){return u.a.put(b+"/"+e.id,{id:e.id,title:e.title,author:e.author,authorid:e.authorid,text:e.text,votes:e.votes}).then((function(e){return e.data}))},x=function(e){return u.a.delete(b+"/"+e).then((function(e){return e.data}))},f=o(12),p=o(0),g=function(e){var t=e.poem,o=e.addVote,n=Object(s.useState)(!1),a=Object(r.a)(n,2),c=a[0],i=a[1];return Object(p.jsxs)("ul",{className:"list-unstyled",children:[Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/api/poems/".concat(t.id),children:Object(p.jsx)("h3",{className:"display-3",children:t.title})})}),Object(p.jsxs)("li",{children:["Author: ",t.author]}),c?Object(p.jsxs)("li",{children:[Object(p.jsx)(f.a,{className:"lead",children:t.text})," ",Object(p.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){return i(!c)},children:"Collapse"})]}):Object(p.jsxs)("li",{children:[Object(p.jsx)(f.a,{className:"lead",children:t.text.substr(0,300)})," ... ",Object(p.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){return i(!c)},children:"read more"})]}),Object(p.jsxs)("li",{children:["Votes: ",t.votes,"  ",Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){console.log("Add Vote to poem ",t),o(t)},children:"+ Vote"})]})]})},v=function(e){var t=e.poems,o=e.addVote;return Object(p.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(g,{poem:e,addVote:o})},e.id)}))})},N=function(e){var t=e.poems,o=e.addVote,s=e.addPoemError,n=e.setAddPoemError,a=e.redirect,c=e.setRedirect;return a&&c(!1),s&&n(!1),Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"row mx-auto",children:[Object(p.jsx)("h1",{children:"Poem World"}),Object(p.jsx)(v,{poems:t,addVote:o})]})})},w=o(4),P=function(e){var t=e.poem,o=e.editPoem,n=e.setEditMode,a=Object(s.useState)(t),c=Object(r.a)(a,2),l=c[0],i=c[1],d=function(e){var t=e.target.attributes.name.value;console.log(t,e.target.value),"title"===t?i(Object(w.a)(Object(w.a)({},l),{},{title:e.target.value})):"author"===t?i(Object(w.a)(Object(w.a)({},l),{},{author:e.target.value})):"authorid"===t?i(Object(w.a)(Object(w.a)({},l),{},{authorid:e.target.value})):"text"===t&&i(Object(w.a)(Object(w.a)({},l),{},{text:e.target.value})),console.log("setFormInfo")};return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Form submitted: ",l),o(l),i(l),n(!1)},children:[Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"title",className:"form-label",children:"Poem Title"}),Object(p.jsx)("input",{value:l.title,name:"title",className:"form-control",onChange:d,required:!0})]}),Object(p.jsxs)("div",{className:"col-mb-6",children:[Object(p.jsx)("label",{htmlFor:"author",className:"form-label",children:"Author"}),Object(p.jsx)("input",{value:l.author,name:"author",className:"form-control",onChange:d,required:!0})]}),Object(p.jsxs)("div",{className:"col-mb-3",children:[Object(p.jsx)("label",{htmlFor:"authorid",className:"form-label",children:"Author ID"}),Object(p.jsx)("input",{value:l.authorid,name:"authorid",type:"number",className:"form-control",onChange:d,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"text",className:"form-label",children:"Poem Text"}),Object(p.jsx)("textarea",{value:l.text,name:"text",className:"form-control",rows:"10",cols:"50",onChange:d,required:!0})]}),Object(p.jsx)("button",{type:"submit",className:"col btn btn-success",children:"Submit Edit"})]}),Object(p.jsx)("p",{children:"**Note: use mark down syntax to format your text. Refer to mark down guide for baic syntax."}),Object(p.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank",children:"https://www.markdownguide.org/basic-syntax/"})]})},y=function(e){var t=e.poems,o=e.addVote,n=e.editPoem,a=e.deletePoem,c=e.setRedirect,l=Object(s.useState)(!1),d=Object(r.a)(l,2),u=d[0],b=d[1],j=Number(Object(i.g)().id),m=t.find((function(e){return e.id===j}));return m?(console.log("poem is ",m),u?(console.log("edit poem here"),Object(p.jsx)(P,{poem:m,editPoem:n,setEditMode:b})):Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row gap-3",children:Object(p.jsxs)("ul",{className:"list-unstyled",children:[Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)("h3",{children:m.title})}),Object(p.jsxs)("li",{className:"list-group-item",children:["Author: ",m.author]}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(f.a,{children:m.text})}),Object(p.jsxs)("li",{className:"list-group-item",children:["Vote: ",m.votes," ",Object(p.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){console.log("Add Vote to poem ",m),o(m)},children:"+ Vote"})]}),Object(p.jsx)("button",{type:"button",className:"col btn btn-success",onClick:function(){console.log("edit button has been pressed for id:",j),b(!0)},children:"Edit"}),Object(p.jsx)("button",{type:"button",className:"col btn btn-danger",onClick:function(){console.log("delete button is pressed for: ",j),c(!0),a(j)},children:"Delete"})]})})})):c(!0)},k=function(e){var t=e.createPoem,o=e.addPoemError,n=(e.setAddPoemError,e.setRedirect),a={title:"",author:"",authorid:0,text:""},c=Object(s.useState)(a),l=Object(r.a)(c,2),i=l[0],d=l[1],u=function(e){var t=e.target.attributes.name.value;console.log(t,e.target.value),"title"===t?d(Object(w.a)(Object(w.a)({},i),{},{title:e.target.value})):"author"===t?d(Object(w.a)(Object(w.a)({},i),{},{author:e.target.value})):"authorid"===t?d(Object(w.a)(Object(w.a)({},i),{},{authorid:e.target.value})):"text"===t&&d(Object(w.a)(Object(w.a)({},i),{},{text:e.target.value})),console.log("setFormInfo")};return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Form submitted: ",i),t(i),d(a),n(!0)},children:[Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"title",className:"form-label",children:"Poem Title"}),Object(p.jsx)("input",{name:"title",className:"form-control",onChange:u,required:!0})]}),Object(p.jsxs)("div",{className:"col-md-6",children:[Object(p.jsx)("label",{htmlFor:"author",className:"form-label",children:"Author"}),Object(p.jsx)("input",{name:"author",className:"form-control",onChange:u,required:!0})]}),Object(p.jsxs)("div",{className:"col-md-3",children:[Object(p.jsx)("label",{htmlFor:"authorid",className:"form-label",children:"Author ID"}),Object(p.jsx)("input",{name:"authorid",type:"number",className:"form-control",onChange:u,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"text",className:"form-label",children:"Poem Text"}),Object(p.jsx)("textarea",{name:"text",className:"form-control",rows:"10",cols:"50",onChange:u,required:!0})]}),Object(p.jsx)("button",{type:"submit",className:"col btn btn-success",children:"Add Poem"}),o?Object(p.jsx)("p",{children:"Error! Missing information"}):Object(p.jsx)("p",{})]}),Object(p.jsx)("p",{children:"**Note: use mark down syntax to format your text. Refer to mark down guide for baic syntax."}),Object(p.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank",children:"https://www.markdownguide.org/basic-syntax/"})]})};var E=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),o=t[0],n=t[1],a=Object(s.useState)(!1),c=Object(r.a)(a,2),d=c[0],u=c[1],b=Object(s.useState)(!1),f=Object(r.a)(b,2),g=f[0],v=f[1];Object(s.useEffect)((function(){console.log("effect is being run"),j().then((function(e){console.log("we have a respinse",e),n(e)}))}),[]);var w=function(e){h(e).then((function(t){console.log("POST a vote to poem ",t),n(o.map((function(o){return o.id!==e.id?o:t})))})).catch((function(e){console.log(e),404===e.response.status?console.log("Fail to add vote. Poem cannot be found!",e.response.status):console.log("error!",e.response.status)}))};return Object(p.jsxs)(l.a,{children:[Object(p.jsx)("header",{}),Object(p.jsx)("div",{className:"navbar navbar-dark bg-dark",children:Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(l.b,{className:"nav-link",to:"/",children:"Home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(l.b,{className:"nav-link",to:"/poemForm",children:"Add Poem"})})]})})}),Object(p.jsxs)(i.d,{children:[Object(p.jsx)(i.b,{path:"/poemForm",children:d?Object(p.jsx)(i.a,{to:"/"}):Object(p.jsx)(k,{createPoem:function(e){m(e).then((function(e){console.log("POST resonse data",e),n(o.concat(e)),console.log("A new poem has been added")})).catch((function(e){console.log(e.response.data),v(!0)}))},addPoemError:g,setAddPoemError:v,setRedirect:u})}),Object(p.jsx)(i.b,{path:"/api/poems/:id",children:d?Object(p.jsx)(i.a,{to:"/"}):Object(p.jsx)(y,{poems:o,addVote:w,editPoem:function(e){O(e).then((function(t){console.log("PUT request response",t),n(o.map((function(o){return o.id!==e.id?o:t}))),console.log("unit has been edited",e.id)})).catch((function(e){console.log(e),404===e.response.status?console.log("Fail to edit. Poem cannot be found!",e.response.status):400===e.response.status?console.log("Missing information input. Bad request.",e.response.status):console.log("error!",e.response.status)}))},deletePoem:function(e){x(e).then((function(t){console.log("DELETE response",t),n(o.filter((function(t){return t.id!==e}))),console.log("Poem has been deleted",e)})).catch((function(e){console.log(e),404===e.response.status?console.log("Fail to delete. Poem cannot be found!",e.response.status):console.log("error!",e.response.status)}))},setRedirect:u})}),Object(p.jsx)(i.b,{path:"/",children:Object(p.jsx)(N,{poems:o,addVote:w,addPoemError:g,setAddPoemError:v,redirect:d,setRedirect:u})})]})]})};c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.91c2598f.chunk.js.map